@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* ==================================
   * ACESSIBILIDADE - WCAG 2.1 AA
   * ================================== */

  /* Tamanho de fonte base acessível */
  html {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    font-size: 16px; /* Base 16px para acessibilidade */
  }
  
  body {
    @apply text-base; /* 16px por padrão */
    line-height: 1.6; /* Melhor legibilidade */
  }

  /* Previne overflow horizontal */
  body, html {
    overflow-x: hidden;
    max-width: 100vw;
  }

  /* ==================================
   * FOCUS STATES VISÍVEIS
   * ================================== */
  
  /* Todos os elementos interativos têm focus visível */
  a:focus-visible,
  button:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  [role="button"]:focus-visible,
  [tabindex]:focus-visible {
    outline: 2px solid #2563eb; /* Azul com bom contraste */
    outline-offset: 2px;
  }

  /* ==================================
   * REDUCED MOTION (Acessibilidade)
   * ================================== */
  
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* ==================================
   * ALTO CONTRASTE (Acessibilidade)
   * ================================== */
  
  @media (prefers-contrast: high) {
    body {
      --tw-border-opacity: 1;
      border-color: rgb(0 0 0 / var(--tw-border-opacity));
    }
    
    button,
    a {
      text-decoration: underline;
    }
  }

  /* ==================================
   * TEXTOS COM MELHOR CONTRASTE
   * ================================== */
  
  /* Textos escuros: mínimo 4.5:1 contraste */
  .text-slate-700 {
    color: #374151 !important; /* Mais escuro para melhor contraste */
  }
  
  .text-slate-600 {
    color: #4b5563 !important; /* Mais escuro */
  }

  /* Links com contraste adequado */
  a {
    color: #1e40af; /* Azul mais escuro */
  }
  
  a:hover {
    color: #1e3a8a; /* Ainda mais escuro no hover */
  }

  /* ==================================
   * TAMANHOS MÍNIMOS DE TOQUE (44x44px)
   * ================================== */
  
  button,
  a,
  [role="button"],
  input[type="button"],
  input[type="submit"],
  input[type="reset"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Exceções para ícones pequenos */
  .icon-button {
    min-height: auto;
    min-width: auto;
  }
}

@layer components {
  /* ==================================
   * INPUTS ACESSÍVEIS
   * ================================== */
  
  .input {
    @apply w-full rounded-lg border-2 border-slate-400 bg-white px-4 py-3 text-base text-slate-900 placeholder-slate-500 transition;
    @apply hover:border-slate-500;
    @apply focus:border-brand-600 focus:ring-4 focus:ring-brand-600/20;
    min-height: 44px; /* Touch target mínimo */
    line-height: 1.5;
  }
  
  /* Estado de erro */
  .input-error {
    @apply border-red-600 focus:border-red-600 focus:ring-red-600/20;
  }

  /* Label acessível */
  label {
    @apply text-sm font-medium text-slate-900;
    line-height: 1.5;
  }

  /* ==================================
   * BOTÕES ACESSÍVEIS
   * ================================== */
  
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-6 py-3 text-base font-semibold transition-all duration-200;
    min-height: 44px; /* Touch target mínimo */
    line-height: 1.5;
  }
  
  .btn-primary {
    @apply bg-brand-600 text-white shadow hover:bg-brand-700 hover:shadow-lg;
    @apply focus-visible:ring-4 focus-visible:ring-brand-600/30;
    /* Contraste mínimo 4.5:1 garantido */
  }
  
  .btn-secondary {
    @apply bg-white text-brand-700 border-2 border-brand-600 hover:bg-brand-50;
    @apply focus-visible:ring-4 focus-visible:ring-brand-600/30;
  }

  .btn-danger {
    @apply bg-red-600 text-white hover:bg-red-700;
    @apply focus-visible:ring-4 focus-visible:ring-red-600/30;
  }

  /* ==================================
   * CARDS E CONTAINERS
   * ================================== */
  
  .card {
    @apply rounded-xl border border-slate-200 bg-white p-6 shadow-sm;
  }

  /* ==================================
   * ALERTS ACESSÍVEIS
   * ================================== */
  
  .alert {
    @apply rounded-lg border-2 p-4 text-sm;
    line-height: 1.6;
  }

  .alert-info {
    @apply border-blue-300 bg-blue-50 text-blue-900;
  }

  .alert-success {
    @apply border-green-300 bg-green-50 text-green-900;
  }

  .alert-warning {
    @apply border-amber-300 bg-amber-50 text-amber-900;
  }

  .alert-error {
    @apply border-red-300 bg-red-50 text-red-900;
  }

  /* ==================================
   * SKIP LINKS (Navegação por teclado)
   * ================================== */
  
  .skip-link {
    @apply absolute -top-full left-0 z-50 bg-brand-600 px-6 py-3 text-white font-semibold;
    @apply focus:top-0 focus:outline-4 focus:outline-offset-2 focus:outline-white;
  }
}

/* ==================================
 * UTILITÁRIOS DE ACESSIBILIDADE
 * ================================== */

/* Screen reader only (oculta visualmente mas mantém para leitores) */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Focus visível sempre que necessário */
.focus-ring {
  @apply focus-visible:ring-4 focus-visible:ring-brand-600/30 focus-visible:outline-none;
}

/* Safe area para devices com notch */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

/* ==================================
 * MODO ESCURO (Preparado para futuro)
 * ================================== */

@media (prefers-color-scheme: dark) {
  /* Preparação para modo escuro futuro */
  /* Descomente quando implementar tema escuro */
  /*
  :root {
    --background: #0f172a;
    --foreground: #f1f5f9;
  }
  */
}
